var $,DataTable;function setJQuery(t){DataTable=($=t).fn.dataTable}var FixedColumns=function(){function o(t,s){var e=this;if(!DataTable||!DataTable.versionCheck||!DataTable.versionCheck("2"))throw new Error("FixedColumns requires DataTables 2 or newer");var t=new DataTable.Api(t),l=(this.classes=$.extend(!0,{},o.classes),this.c=$.extend(!0,{},o.defaults,s),this.s={dt:t,rtl:"rtl"===$(t.table().node()).css("direction")},s&&void 0!==s.leftColumns&&(s.left=s.leftColumns),s&&void 0!==s.left&&(this.c[this.s.rtl?"end":"start"]=s.left),s&&void 0!==s.rightColumns&&(s.right=s.rightColumns),s&&void 0!==s.right&&(this.c[this.s.rtl?"start":"end"]=s.right),this.dom={bottomBlocker:$("<div>").addClass(this.classes.bottomBlocker),topBlocker:$("<div>").addClass(this.classes.topBlocker),scroller:$("div.dt-scroll-body",this.s.dt.table().container())},this.s.dt.settings()[0]._bInitComplete?(this._addStyles(),this._setKeyTableListener()):t.one("init.dt.dtfc",function(){e._addStyles(),e._setKeyTableListener()}),t.on("column-sizing.dt.dtfc column-reorder.dt.dtfc draw.dt.dtfc",function(){return e._addStyles()}),DataTable.util.debounce(function(){e._addStyles()},50));return t.on("column-visibility.dt.dtfc",function(){l()}),this.dom.scroller.on("scroll.dtfc",function(){return e._scroll()}),this._scroll(),t.settings()[0]._fixedColumns=this,t.on("destroy",function(){return e._destroy()}),this}return o.prototype.end=function(t){return void 0!==t?(0<=t&&t<=this.s.dt.columns().count()&&(this.c.end=t,this._addStyles()),this):this.c.end},o.prototype.left=function(t){return this.s.rtl?this.end(t):this.start(t)},o.prototype.right=function(t){return this.s.rtl?this.start(t):this.end(t)},o.prototype.start=function(t){return void 0!==t?(0<=t&&t<=this.s.dt.columns().count()&&(this.c.start=t,this._addStyles()),this):this.c.start},o.prototype._addStyles=function(){var e=this.s.dt,l=this,o=this.s.dt.columns(":visible").count(),i=e.table().header.structure(":visible"),r=e.table().footer.structure(":visible"),d=e.columns(":visible").widths().toArray(),t=$(e.table().node()).closest("div.dt-scroll"),s=$(e.table().node()).closest("div.dt-scroll-body")[0],n=this.s.rtl,a=this.c.start,c=this.c.end,f=n?c:a,n=n?a:c,h=e.settings()[0].oBrowser.barWidth;if(0===t.length)return this;s.offsetWidth===s.clientWidth&&(h=0),e.columns(":visible").every(function(t){var s,t=e.column.index("toVisible",t);t<a?(s=l._sum(d,t),l._fixColumn(t,s,"start",i,r,h)):o-c<=t?(s=l._sum(d,o-t-1,!0),l._fixColumn(t,s,"end",i,r,h)):l._fixColumn(t,0,"none",i,r,h)}),$(e.table().node()).toggleClass(l.classes.tableFixedStart,0<a).toggleClass(l.classes.tableFixedEnd,0<c).toggleClass(l.classes.tableFixedLeft,0<f).toggleClass(l.classes.tableFixedRight,0<n);s=e.table().header(),f=e.table().footer(),n=$(s).outerHeight(),s=$(f).outerHeight();this.dom.topBlocker.appendTo(t).css("top",0).css(this.s.rtl?"left":"right",0).css("height",n).css("width",h+1).css("display",h?"block":"none"),f&&this.dom.bottomBlocker.appendTo(t).css("bottom",0).css(this.s.rtl?"left":"right",0).css("height",s).css("width",h+1).css("display",h?"block":"none")},o.prototype._destroy=function(){this.s.dt.off(".dtfc"),this.dom.scroller.off(".dtfc"),$(this.s.dt.table().node()).removeClass(this.classes.tableScrollingEnd+" "+this.classes.tableScrollingLeft+" "+this.classes.tableScrollingStart+" "+this.classes.tableScrollingRight),this.dom.bottomBlocker.remove(),this.dom.topBlocker.remove()},o.prototype._fixColumn=function(s,o,i,t,e,r){function l(t,s){var e,l;"none"===i?t.css("position","").css("left","").css("right","").removeClass(d.classes.fixedEnd+" "+d.classes.fixedLeft+" "+d.classes.fixedRight+" "+d.classes.fixedStart):(e="start"===i?"left":"right",d.s.rtl&&(e="start"===i?"right":"left"),l=o,"end"!==i||"header"!==s&&"footer"!==s||(l+=r),t.css("position","sticky").css(e,l).addClass("start"===i?d.classes.fixedStart:d.classes.fixedEnd).addClass("left"===e?d.classes.fixedLeft:d.classes.fixedRight))}var d=this,n=this.s.dt;t.forEach(function(t){t[s]&&l($(t[s].cell),"header")}),l(n.column(s+":visible",{page:"current"}).nodes().to$(),"body"),e&&e.forEach(function(t){t[s]&&l($(t[s].cell),"footer")})},o.prototype._scroll=function(){var t,s,e,l,o=this.dom.scroller[0];o&&(t=$(this.s.dt.table().node()).add(this.s.dt.table().header().parentNode).add(this.s.dt.table().footer().parentNode).add("div.dt-scroll-headInner table",this.s.dt.table().container()).add("div.dt-scroll-footInner table",this.s.dt.table().container()),s=o.scrollLeft,e=!this.s.rtl,l=0!==s,o=o.scrollWidth>o.clientWidth+Math.abs(s)+1,t.toggleClass(this.classes.tableScrollingStart,l),t.toggleClass(this.classes.tableScrollingEnd,o),t.toggleClass(this.classes.tableScrollingLeft,l&&e||o&&!e),t.toggleClass(this.classes.tableScrollingRight,o&&e||l&&!e))},o.prototype._setKeyTableListener=function(){var a=this;this.s.dt.on("key-focus.dt.dtfc",function(t,s,e){var l,o,i,r=$(e.node()).offset(),d=a.dom.scroller[0],n=$($(a.s.dt.table().node()).closest("div.dt-scroll-body"));0<a.c.start&&(i=(o=$(a.s.dt.column(a.c.start-1).header())).offset(),o=o.outerWidth(),$(e.node()).hasClass(a.classes.fixedLeft)?n.scrollLeft(0):r.left<i.left+o&&(l=n.scrollLeft(),n.scrollLeft(l-(i.left+o-r.left)))),0<a.c.end&&(i=a.s.dt.columns().data().toArray().length,o=$(e.node()).outerWidth(),i=$(a.s.dt.column(i-a.c.end).header()).offset(),$(e.node()).hasClass(a.classes.fixedRight)?n.scrollLeft(d.scrollWidth-d.clientWidth):r.left+o>i.left&&(l=n.scrollLeft(),n.scrollLeft(l-(i.left-(r.left+o)))))})},o.prototype._sum=function(t,s,e){return(t=(e=void 0===e?!1:e)?t.slice().reverse():t).slice(0,s).reduce(function(t,s){return t+s},0)},o.version="5.0.0",o.classes={bottomBlocker:"dtfc-bottom-blocker",fixedEnd:"dtfc-fixed-end",fixedLeft:"dtfc-fixed-left",fixedRight:"dtfc-fixed-right",fixedStart:"dtfc-fixed-start",tableFixedEnd:"dtfc-has-end",tableFixedLeft:"dtfc-has-left",tableFixedRight:"dtfc-has-right",tableFixedStart:"dtfc-has-start",tableScrollingEnd:"dtfc-scrolling-end",tableScrollingLeft:"dtfc-scrolling-left",tableScrollingRight:"dtfc-scrolling-right",tableScrollingStart:"dtfc-scrolling-start",topBlocker:"dtfc-top-blocker"},o.defaults={i18n:{button:"FixedColumns"},start:1,end:0},o}();export default FixedColumns;export{setJQuery};